---
layout: page.njk
title: Focus Trap Inert
eleventyNavigation:
  key: Focus Trap Inert
  parent: Recipe 3.4
---
<div class="page-wrapper"> 
  <header>
    <a href="#">Home</a>
  </header>

  <main>
    <button class="open">Login</button>
  </main>
</div>

<div role="dialog" aria-modal="true" hidden tabindex="-1" aria-labelledby="heading">
  <button class="close">Close</button>
  
  <h1 id="heading">Login</h1>
</div>

<script>
/* For the complete JS code see recipe 3.3 */
const pageWrapper = document.querySelector('.page-wrapper')
const dialogOpen = document.querySelector('.open')
const dialogClose = document.querySelector('.close')
const dialog = document.querySelector('[role="dialog"]')
let trigger

dialogOpen.addEventListener('click', open)
dialogClose.addEventListener('click', close)

function open() {
  trigger = document.activeElement
  dialogToggle()
}

function close () {
  dialogToggle()
}

function dialogToggle() {
  const isOpen = !dialog.hasAttribute('hidden')
  
  if (!isOpen) {
    dialog.removeAttribute('hidden')
    pageWrapper.setAttribute('inert', 'inert')
    dialog.focus()
  } else {
    dialog.setAttribute('hidden', 'hidden')
    pageWrapper.removeAttribute('inert')
    trigger.focus()
  }
}
</script>