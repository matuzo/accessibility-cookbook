
<!DOCTYPE html>
<html lang="en" class="no-js">
<!-- TODO: Check lang attribute --> 
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Custom Modal - Accessibility Cookbook</title>
  
  <script type="module">document.documentElement.classList.replace('no-js', 'js');</script>
  
  <link rel="stylesheet" href="/assets/style.css">
</head>
<body>
  <header>
  <a href="/">Accessibility CookBook Demos</a>
</header>
<main>
  <h1>Custom Modal</h1>
  
<style>
  [role="dialog"] {
    align-items: center;
    background: rgb( 0 0 0 / 0.2);
    inset: 0;
    justify-content: center;
    margin: auto;
    position: fixed;
  }

  [role="dialog"]:not([hidden]) {
    display: flex;
  }

  [role="dialog"] > div {
    background: rgb(255 255 255);
    box-sizing: border-box;
    max-width: 40rem;
    padding: 2rem;
    width: 90vw;
  }

  :focus-visible {
    outline: 4px solid #123456;
    outline-offset: 4px;
  }

  [role="dialog"]:focus-visible {
    outline-offset: -8px;
  }
</style>

<button class="open">Login</button>

<div role="dialog" aria-modal="true" hidden tabindex="-1" aria-labelledby="heading">
  <div>
    <button class="close">Close</button>
    
    <h1 id="heading">Login</h1>
  </div>
</div>

<script>
  const dialogOpen = document.querySelector('.open')
  const dialogClose = document.querySelector('.close')
  const dialog = document.querySelector('[role="dialog"]')
  let trigger

  dialogOpen.addEventListener('click', open)
  dialogClose.addEventListener('click', close)

  function open() {
    trigger = document.activeElement
    dialogToggle()
  }

  function close () {
    dialogToggle()
  }

  function dialogToggle() {
    const isOpen = !dialog.hasAttribute('hidden')
    
    if (!isOpen) {
      dialog.removeAttribute('hidden')
      dialog.focus()
    } else {
      dialog.setAttribute('hidden', 'hidden')
      trigger.focus()
    }
  }
</script>
</main>
</body>
</html>