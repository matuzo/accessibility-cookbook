
<!DOCTYPE html>
<html lang="en" class="no-js">
<!-- TODO: Check lang attribute --> 
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Focus Trap Inert - Accessibility Cookbook</title>
  
  <script type="module">document.documentElement.classList.replace('no-js', 'js');</script>
  
  <link rel="stylesheet" href="/assets/style.css">
</head>
<body>
  <header>
  <a href="/">Accessibility CookBook Demos</a>
</header>
<main>
  <h1>Focus Trap Inert</h1>
  <div class="page-wrapper"> 
  <header>
    <a href="#">Home</a>
  </header>

  <main>
    <button class="open">Login</button>
  </main>
</div>

<div role="dialog" aria-modal="true" hidden tabindex="-1" aria-labelledby="heading">
  <button class="close">Close</button>
  
  <h1 id="heading">Login</h1>
</div>

<script>
/* For the complete JS code see recipe 3.3 */
const pageWrapper = document.querySelector('.page-wrapper')
const dialogOpen = document.querySelector('.open')
const dialogClose = document.querySelector('.close')
const dialog = document.querySelector('[role="dialog"]')
let trigger

dialogOpen.addEventListener('click', open)
dialogClose.addEventListener('click', close)

function open() {
  trigger = document.activeElement
  dialogToggle()
}

function close () {
  dialogToggle()
}

function dialogToggle() {
  const isOpen = !dialog.hasAttribute('hidden')
  
  if (!isOpen) {
    dialog.removeAttribute('hidden')
    pageWrapper.setAttribute('inert', 'inert')
    dialog.focus()
  } else {
    dialog.setAttribute('hidden', 'hidden')
    pageWrapper.removeAttribute('inert')
    trigger.focus()
  }
}
</script>
</main>
</body>
</html>